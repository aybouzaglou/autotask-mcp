# Test Design: Story 1.6

Date: 2025-09-17
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 5
- Unit tests: 3 (60%)
- Integration tests: 2 (40%)
- E2E tests: 0 (0%)
- Priority distribution: P0: 2, P1: 2, P2: 1

## Test Scenarios by Acceptance Criteria

### AC1: Tool is listed with required schema

| ID           | Level | Priority | Test                                  | Justification                                   |
|--------------|-------|----------|---------------------------------------|-------------------------------------------------|
| 1.6-UNIT-001 | Unit  | P1       | listTools includes update_ticket      | Pure handler list output validation             |

### AC2/AC3/AC4: Delegation and validation behavior

| ID           | Level       | Priority | Test                                                        | Justification                              |
|--------------|-------------|----------|-------------------------------------------------------------|--------------------------------------------|
| 1.6-UNIT-002 | Unit        | P0       | callTool rejects payload with no mutable fields             | Critical validation protects API           |
| 1.6-UNIT-003 | Unit        | P1       | callTool filters fields, delegates to service, returns ok   | Ensures correct mapping & success handling |
| 1.6-INT-001  | Integration | P0       | Live Autotask patch smoke (gated by env)                    | Verifies real PATCH path works             |
| 1.6-INT-002  | Integration | P2       | Ticket patch via Smithery-hosted HTTP (optional)            | Confirms parity over hosted transport      |

## Risk Coverage

- Security/data integrity: Validation prevents empty PATCH payloads (P0 unit test)
- Transport parity: Optional hosted smoke covers regressions across transports

## Recommended Execution Order

1. P0 Unit tests (1.6-UNIT-002)
2. P1 Unit tests (1.6-UNIT-001, 1.6-UNIT-003)
3. P0 Integration (1.6-INT-001) when credentials available
4. P2 Integration (1.6-INT-002) when hosted endpoint available

---

test_design:
  scenarios_total: 5
  by_level:
    unit: 3
    integration: 2
    e2e: 0
  by_priority:
    p0: 2
    p1: 2
    p2: 1
  coverage_gaps: []
